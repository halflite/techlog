<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>java on ひとり開発日記。</title>
    <link>https://halflite.github.io/techlog/tags/java/</link>
    <description>Recent content in java on ひとり開発日記。</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Thu, 25 Jun 2020 12:00:00 +0900</lastBuildDate>
    
	<atom:link href="https://halflite.github.io/techlog/tags/java/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>2020年 Javaベースのバッチを作るなら</title>
      <link>https://halflite.github.io/techlog/posts/20200625_java_based_batch/</link>
      <pubDate>Thu, 25 Jun 2020 12:00:00 +0900</pubDate>
      
      <guid>https://halflite.github.io/techlog/posts/20200625_java_based_batch/</guid>
      <description>前々回位の現場で、Javaベースのバッチ処理を作ることがあって。 「オンプレ環境で、そこまで厳格な条件ではないけど、ある程度安定して動いて欲しい」 「DBに接続して、データを取得後加工、CSVに出力して、それをメールに添付して送付」 位の要件でしたね。1
そこでは、アーキテクチャを選択できる立場になかったので、以前からあるバッチの仕組みを、ちょろっといじってサーバに置いたんですが。2 でも、今、自分が作るとしたら、どんな仕組みにするかなぁ、って、ちょっと考えてみました。
 ある程度ポータブルなものにしたいよね  オンプレとは言え、不定期にサーバーの統廃合があったりする サーバーの統廃合時に、cronタブの設定忘れたり サーバーごとに 秘伝のタレ の設定/シェルがあったり   ある程度複雑なロジックを伴うから、TDDとかやりたいよね  ちょっとした変更だって、やっぱり確認しながらやりたい   デプロイ時に漏れとか防ぎたいよね ソース管理理もGitとかのVCSでやりたいよね  たまーに機能追加しようとすると、もういない担当者のPCの中にしかソースが…    …あれ? 結構条件ありますね。
今、自分で作るとするなら、こんな感じかな
 ある程度枯れた、よく使われる軽量ライブラリの組合せで作る  GraalVMとか、まだ人類には早すぎるのでは… Jdbi のような軽量OR/M   変数を、環境変数や実行時変数から注入できる仕組みを組み込む  VCSで管理する以上、DB接続情報、メールサーバー接続情報等々をコミットするのは、アンチパターンでしょう Typesafe Config MicroProfile Configuration   ビジネスロジックをTDDで作るために、モックとか差し替えしたい  軽量DIコンテナを採用する Dagger   Maven/Gradleで、依存関係やバージョン情報を明示 実行可能なFatJarを作成して java --jar batch.jar だけで実行可能 実行は、cronではなく、バッチ実行の仕組みを別に用意する  Rundeck   そんなに頻繁な更新でなくとも、CI/CDの仕組みに乗せる  意外とやらないといけないこと多いですわ。
 参考 Serverless時代のJavaについて    あるある案件 &amp;#x21a9;&amp;#xfe0e;</description>
    </item>
    
    <item>
      <title>Java NIO2 で一時ファイルを作成、処理後に削除</title>
      <link>https://halflite.github.io/techlog/posts/20200222_temporary_file_delete_on_close/</link>
      <pubDate>Sat, 22 Feb 2020 00:00:00 +0900</pubDate>
      
      <guid>https://halflite.github.io/techlog/posts/20200222_temporary_file_delete_on_close/</guid>
      <description>public void doSomething() { try { Path tempFilePath = Files.createTempFile(&amp;#34;id&amp;#34;, &amp;#34;.tmp&amp;#34;); try (Writer writer = Files.newBufferedWriter(tempFilePath)) { // do something.  // 終わった後に一時ファイルを削除したい  } } catch (IOException e) { // ログとか出したり、または、別の例外再スロー  } } 上記のような処理で、「一時ファイルを作成、処理後に削除」って、どうやるんだっけ、って、思い出すのに四苦八苦してしまったので…。1
 public static Closeable deleteOnClose(final Path tempFilePath) { return new Closeable() { @Override public void close() throws IOException { Files.deleteIfExists(tempFilePath); } }; } public void doSomething() { try { Path tempFilePath = Files.createTempFile(&amp;#34;id&amp;#34;, &amp;#34;.tmp&amp;#34;); try (Closeable closeable = deleteOnClose(tempFilePath); Writer writer = Files.</description>
    </item>
    
    <item>
      <title>Mavenで依存関係あるライブラリをダウンロードしたいだけだった。</title>
      <link>https://halflite.github.io/techlog/posts/20200214_maven_copy_dependencies/</link>
      <pubDate>Thu, 13 Feb 2020 00:00:00 +0900</pubDate>
      
      <guid>https://halflite.github.io/techlog/posts/20200214_maven_copy_dependencies/</guid>
      <description>また、以前blogに書いていたのに、すっかり忘れてググってしまったので。
mvn dependency:copy-dependencies -DincludeScope=test 上記を実行すると、プロジェクト配下の target/dependency に、テストスコープのものも含めて、 *.jar ファイルがダウンロードされます。1
  書いている時点のmavenバージョン 3.6.3 &amp;#x21a9;&amp;#xfe0e;
   </description>
    </item>
    
    <item>
      <title>Windowsのcmd.exeで、Mavenを使って新規プロジェクトを作る時、複数行に分けて書きたかっただけだった。</title>
      <link>https://halflite.github.io/techlog/posts/20200120_maven_cmd/</link>
      <pubDate>Mon, 20 Jan 2020 00:00:00 +0900</pubDate>
      
      <guid>https://halflite.github.io/techlog/posts/20200120_maven_cmd/</guid>
      <description>新しいライブラリやフレームワークを試す時、素振りも兼ねて、小さいJavaプロジェクトを作ってみるんですが、毎回Maven Archetypeの書き方を忘れて、自分のblogを読み返してしまったり。
この度、blog移設なので、ここでも書き記しておく次第です。
mvn archetype:generate ^ -DarchetypeArtifactId=maven-archetype-quickstart ^ -DinteractiveMode=false ^ -DgroupId=net.halflite ^ -DartifactId=testapp ^ -Dpackage=net.halflite.testapp  もとねた
 Maven Quickstart Archetype – Maven Quickstart Archetype cmdのバッチファイルで、1コマンドを複数行にわたって記述したい場合 - Qiita  </description>
    </item>
    
  </channel>
</rss>